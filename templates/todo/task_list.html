{% extends "base.html" %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center">
    <h1>TODO list</h1>
    <a href="{% url 'todo:task-create' %}" class="btn btn-primary">Create</a>
  </div>
  {% for task in task_list %}
    <div class="d-flex justify-content-between align-items-center border-bottom border-secondary mb-3">
      <ul class="list">
        <li>
          <strong>
            {{ task.content }}
            {% if task.is_done %}
              <span class="text-success">
                Done
              </span>
            {% else %}
              <span class="text-danger">
                Not done
              </span>
            {% endif %}
          </strong>
        </li>
        <li>
          <p>Created at {{ task.datetime }} {% if task.deadline %}<span class="danger">Deadline: {{ task.deadline }}</span>{% endif %}</p>
        </li>
        <li>
          <div class="d-flex flex-row">
            {% if task.tags.all %}
              {% for tag in task.tags.all %}
                <p class="text-secondary pr-1">{{ tag.name }}</p>
              {% endfor %}
            {% else %}
              <p>There are no tags</p>
            {% endif %}
            <a href="{% url 'todo:task-update' pk=task.id %}" class="text-primary pr-1">Update</a>
            <a href="{% url 'todo:task-delete' pk=task.id %}" class="text-primary pr-1">Delete</a>
          </div>
        </li>
      </ul>
      {% if task.is_done %}
        <a href="{% url 'todo:task-toggle-status' pk=task.pk %}" class="btn btn-secondary ml-auto">
          Undo
        </a>
      {% else %}
        <a href="{% url 'todo:task-toggle-status' pk=task.pk %}" class="btn btn-success ml-auto align-middle">
          Complete
        </a>
      {% endif %}
    </div>
  {% endfor %}
{% endblock %}
